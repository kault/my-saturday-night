<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Canvas Colors</title>

    <link href="/stylesheets/screen.css" media="all" rel="stylesheet" type="text/css"/>

    <script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
   
    <style type="text/css">
      html, body {
      width:  100%;
      height: 100%;
      margin: 0px;
      overflow: hidden;
    }
    </style>
  </head>

  <body>
    <canvas id="myCanvas" width="800" height="600"></canvas>
    <script>
      // Initialize an HTML5 context from canvas myCanvas
      var canvas = document.getElementById('myCanvas');
      var ctx = canvas.getContext('2d');

      // This is static here (TODO: fix)
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      // Create player object
      var player = {
        r:255, g:165, b:0, cInc:true, lastX:-1, lastY:-1, x:-1, y:-1,
        draw: function() {
          ctx.strokeStyle = 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';
          //ctx.beginPath();
          //ctx.arc(this.x,this.y,10,0,2*Math.PI);
          //ctx.fill();

          ctx.beginPath();
          ctx.lineWidth="10";
          if (this.x != -1 && this.lastX != -1) {
            console.log("X: " + this.lastX + ", Y: " + this.lastY);
            ctx.lineCap="round";
            ctx.moveTo(this.lastX, this.lastY);
            ctx.lineTo(this.x, this.y);
            //ctx.bezierCurveTo(150, 100, 350, 100, this.x, this.y);
            ctx.stroke();

            if (this.cInc) {this.g += 1;} else {this.g -= 1;}
            if (this.g == 0) {this.cInc = true;}
            if (this.g == 230) {this.cInc = false;}
          }
        }
      };

      // Add an event listener to detect mouse movement
      canvas.addEventListener('mousemove', function(evt) {
        // Get mouse coordinates and make msg
        var mousePos = getMousePos(canvas, evt);
        var message = 'Player pos: ' + player.x + ',' + player.y;
        // Draw anew
        draw(canvas, message, mousePos);
      }, false);

      function draw(canvas, message, mousePos) {
        var ctx = canvas.getContext('2d');
        ctx.font = '18pt Calibri';
        ctx.fillStyle = 'black';
        ctx.clearRect(0, 0, 230, 30);
        ctx.fillText(message, 10, 25);

        player.lastX = player.x;
        player.lastY = player.y;
        player.x = mousePos.x;
        player.y = mousePos.y;
        player.draw();
      }

      // Drawing and shit
      // setInterval(function() {
      // }, 1000/FPS);

      function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        return {
          x: evt.clientX - rect.left,
          y: evt.clientY - rect.top
        };
      }
    </script>
  </body>
</html>

